<div class="contentbox person" id="person_<%= person.id %>">

  <div class="post_header"><h2><%= link_to_unless_current person.title, person %><span class='author'>by <%= person.user.login %></span></h2></div>
  <div class="post_content readable">
    <%= raw person.content %>
  </div>

  <% if can? :update, person -%>
    <div class="misc">
      <span class="destroy">
        <%= link_to "edit", edit_person_path(person) %>
        <% if can? :delete, person %><%= link_to "delete", person, :method => :delete,
                                      :confirm => "You sure?",
                                      :title => person.title %><% end %>
      </span>
    </div>
  <% end -%>

  <div class="answers" id="answers_<%= person.id %>">
    <% unless person.answers.empty? -%>
      <%= render :partial => 'answers/answer', :collection => person.answers %>
    <% end -%>
  </div>
</div>
<% if can? :create, Answer -%>
  <% unless person.answers.any? { |answer| answer.user.id == current_user.id } -%>
    <%= render :partial => 'answers/answer_form', :locals => { :person => person, :answer => Answer.new } %>
  <% end -%>
<% end -%>
